{
  "callId": "start-1749160593487",
  "flowData": {
    "nodes": [
      {
        "id": "welcome-node",
        "type": "workflow",
        "position": {"x": 100, "y": 100},
        "data": {
          "nodeTitle": "Welcome Message", 
          "customPrompt": "Hello! I am Tony from SmileBright Dental Clinic. Thank you for calling! How can I help you today? Are you looking to schedule an appointment or do you have questions about our services? IMPORTANT: I can only help with checking availability first - I cannot book appointments until I show you available time slots.",
          "transitions": [
            {
              "id": "transition-to-availability",
              "label": "Check appointment availability",
              "triggerType": "user_response", 
              "triggerValue": "appointment|schedule|book|available|dentist|checkup|cleaning|consultation|slots|doctors|find",
              "description": "User wants to schedule an appointment or check availability"
            }
          ]
        }
      },
      {
        "id": "check-availability-node",
        "type": "cal_check_availability",
        "position": {"x": 400, "y": 100},
        "data": {
          "nodeTitle": "Check Dental Appointment Availability",
          "customPrompt": "Perfect! Let me check our available appointment slots for you. I will use our calendar system to find real available times. CRITICAL INSTRUCTIONS: 1) I MUST call the checkCalendarAvailability tool with startDate and endDate parameters 2) I MUST wait for real results from the API 3) I MUST speak the actual available slots 4) I CANNOT book anything yet - I can only show availability 5) After showing slots, I ask which one they prefer. What dates work best for you? I can check this week, next week, or specific dates.",
          "calApiKey": "cal_live_ad0e0bc39a4d9d0bb6f9cb0961192b3b", 
          "calEventTypeId": "1575900",
          "calTimezone": "America/Los_Angeles",
          "transitions": [
            {
              "id": "transition-to-booking",
              "label": "Book selected appointment", 
              "triggerType": "user_response",
              "triggerValue": "book|schedule|yes|confirm|that works|perfect|option|slot|want|choose",
              "description": "User selects a time slot and wants to book it"
            }
          ]
        }
      },
      {
        "id": "booking-confirmation-node",
        "type": "cal_booking_confirmation",
        "position": {"x": 700, "y": 100},
        "data": {
          "nodeTitle": "Booking Confirmation with Email Collection",
          "customPrompt": "Excellent! I'll help you book that appointment. To ensure accuracy, I need to collect your details carefully. CRITICAL: I MUST collect full name and email address before booking. I CANNOT claim the appointment is booked until I have this information and use the booking confirmation tool. Let me start by getting your full name, then your email address.",
          "calApiKey": "cal_live_ad0e0bc39a4d9d0bb6f9cb0961192b3b",
          "calEventTypeId": "1575900",
          "calTimezone": "America/Los_Angeles",
          "transitions": [
            {
              "id": "transition-to-completion",
              "label": "Booking completed successfully",
              "triggerType": "user_response",
              "triggerValue": "completed|booked|confirmed|yes|perfect|thank you",
              "description": "Booking process completed successfully"
            }
          ]
        }
      },
      {
        "id": "completion-node",
        "type": "workflow",
        "position": {"x": 1000, "y": 100},
        "data": {
          "nodeTitle": "Appointment Confirmation Complete",
          "customPrompt": "Perfect! Your dental appointment has been successfully booked and you should receive a confirmation email shortly. Is there anything else I can help you with today?"
        }
      }
    ],
    "edges": [
      {
        "id": "e1",
        "source": "welcome-node", 
        "target": "check-availability-node",
        "type": "default"
      },
      {
        "id": "e2",
        "source": "check-availability-node", 
        "target": "booking-confirmation-node",
        "type": "default"
      },
      {
        "id": "e3",
        "source": "booking-confirmation-node", 
        "target": "completion-node",
        "type": "default"
      }
    ]
  }
} 